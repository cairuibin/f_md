<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>blog_c</title>
    <link rel="stylesheet" href="./heightlight/styles/atelier-lakeside-dark.css">
    <link href="./heightlight/prism.css" rel="stylesheet">
    <script src="./js/axios.js"></script>
    <script src="./js/vue.js"></script>
    <style>
        #content {
            max-width: 960px;
            margin: auto;
        }
img{
    max-width: 100%;
    max-height: 100%;
}
        .hljs {
            /* background: #000; */
            padding: 1.5rem;
            border-radius: 4px;
        }
    </style>
</head>

<body>

  <img src="./upload/下载 (1).png" alt="">

    <div id="app">
        <input type="file" ref='fileElem'  accept="*" style="display:none" @change="handleFiles">
        <button @click='selectFile'>选择文件</button>
        <div id="content" ref='content' v-html="htmlData"> </div>

    </div>
    <script>
        new Vue({
            el: "#app",
            data: {
                htmlData: ""
            },
            created() {
                this.getHtml()
            },
            methods: {
                async getHtml() {
                    const { data } = await axios.get('/html');
                    this.htmlData = await data.replace(/<pre>/g, '<pre class="hljs">');
                },
                selectFile() {
                    this.$refs.fileElem.click()
                },

                handleFiles(e) {
                    const files = e.target.files
                    console.log(files);

                    this.FileUpload(files[0])
                },

               async FileUpload(file) {
                        const uri = "/FileUpload";
     
                        const fd = new FormData();
                        fd.append('file', file);
                     
                        // console.log(file,'1111',fd.get('file'),fd.get('aaa'))

          
                      const res=await  axios.post(uri,fd,{
                          headers:{
                              'Content-Type':"application/x-www-form-urlencoded"
                          }
                      })
                      console.log(res)
                    
                }
            }
        })
    </script>
</body>

</html>